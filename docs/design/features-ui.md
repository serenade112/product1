# 機能・UI/UX 設計

- 最終更新: YYYY-MM-DD
- 目的: 主要機能と UI/UX を統合管理し、実装チーム・レビュア間の認識を統一する。

## 1. UI/UX ガイドライン

**レイアウト/グリッド**  
- レスポンシブ: モバイル優先（主要ブレークポイント: 480px, 768px, 1024px）

**配色/タイポグラフィ**  
- 記載例: primary color: #007BFF, font-family: -apple-system, BlinkMacSystemFont...

**アクセシビリティ**  
- コントラスト: WCAG AA 準拠（4.5:1）
- フォーカス: キーボードナビゲーション対応
- ARIA: フォーム・ボタン・ダイアログに適切に付与

## 2. 共通コンポーネント

| コンポーネント | 用途 | 備考 |
| --- | --- | --- |
| Button | 汎用ボタン | プライマリ/セカンダリなどバリアントを定義 |
| Input | テキスト入力 | バリデーション状態の表示ルール含む |
| Modal | ダイアログ | フォーカストラップ、閉じる操作の統一 |
| Card | ボックス表示 | 一覧・詳細などで再利用 |

- 利用ルール: 各コンポーネントの props/states/variants を別途設計 or Storybook などで管理する想定。

---

## 3. 機能詳細

各機能ごとに、振る舞いと UI 情報（画面、ワイヤーフレーム、利用コンポーネント）をまとめて記載します。

### F-001: ユーザー登録

**概要**  
メールアドレスとパスワードで新規ユーザーが登録できる機能。

**ユースケース**  
1. ユーザーが `/signup` へアクセス
2. メール入力 → 確認メール送信
3. 確認メール内のリンク踏む → パスワード設定
4. 登録完了 → ダッシュボード へリダイレクト

**受け入れ条件**  
- [ ] メール形式のバリデーション
- [ ] メール確認トークン有効期限 24h
- [ ] パスワード強度ルール（8文字以上、大文字・数字含む）
- [ ] 重複登録防止
- [ ] ユーザーレコード作成後ステータス = `pending`

**UI（画面・ワイヤーフレーム）**  
| ID | 画面名 | 目的 | 入口 | 出口 |
| --- | --- | --- | --- | --- |
| UI-01 | サインアップ | ユーザー登録 | /signup | /welcome |

- ワイヤーフレーム: `assets/ui/signup-wireframe.png` などに配置して参照。

**使用コンポーネント**  
- Button（送信ボタン）
- Input（メール、パスワード）
- Alert/Toast（エラーメッセージ表示）

**技術的考慮**  
- メール送信: Sendgrid / SES
- トークン方式: JWT or ワンタイム URL
- DB トランザクション: 確認済みまで `pending` 状態

**関連ドキュメント**  
- [data.md](data.md) → users テーブル
- [api.md](api.md) → POST /api/auth/signup

---

### F-002: プロフィール編集

**概要**  
ログイン後、ユーザーが自身の情報を編集できる機能。

**ユースケース**  
1. ダッシュボード > 設定 をクリック
2. プロフィール画面で項目を編集
3. 保存ボタンで更新
4. 成功メッセージ表示

**受け入れ条件**  
- [ ] 名前・メール・アバター画像が編集可能
- [ ] メール変更時も確認メール送信
- [ ] 画像サイズ上限 5MB
- [ ] 更新後ユーザーセッション保持

**UI（画面・ワイヤーフレーム）**  
| ID | 画面名 | 目的 | 入口 | 出口 |
| --- | --- | --- | --- | --- |
| UI-02 | プロフィール | 情報編集 | /settings/profile | /dashboard |

- ワイヤーフレーム: `assets/ui/profile-wireframe.png` などに配置して参照。

**使用コンポーネント**  
- Form（プロフィール編集フォーム全体）
- AvatarUploader（アバター画像アップロード）
- Button（保存ボタン）

**技術的考慮**  
- アップロード: S3 or GCS（署名付き URL）
- キャッシュ無効化: ユーザー情報キャッシュを即時削除

**関連ドキュメント**  
- [data.md](data.md) → users テーブル
- [api.md](api.md) → PUT /api/users/:id

---

## 4. ワイヤーフレーム配置ルール

- 図・画像は `assets/ui/` に配置し、相対リンクで参照。
- 命名例: `signup-wireframe.png`, `profile-wireframe.png` など、UI ID と対応させる。
